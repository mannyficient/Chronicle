<style>
* {
  margin: 0;
  padding: 0;
  /* box-sizing: border-box; */
}

body {
  background: #000;
  color: #fff;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
}

/* Container layout */
.container {
  width: 100%;
  max-width: 784px;
  background: #0B0B0B;
  display: flex;
}

/* Timer section */
.timer-section {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  flex: 1;
  padding: 0px;
  border-right: 1px solid #2a2a2a;
  height: 485px;

}


.header {
  text-align: left;
  padding: 16px 16px;
}

.timer-display {
  font-family: monospace;
  font-size: 64px;
  text-align: center;  
}

.timer-actions {
  display: flex;
  justify-content: space-between;
  padding: 0px 16px;
}

/* Consolidate button */
.start-btn {
  color: #00ff00;
  background: none;
  border: none;
  font-size: 12px;
  background: #111111;
  border: none;
  border-radius: 50%;
  width: 3.5rem;
  height: 3.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.reset-btn {
    color: whitesmoke;
  background: none;
  border: none;
  font-size: 12px;
  background: #111111;
  border: none;
  border-radius: 50%;
  width: 3.5rem;
  height: 3.5rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.note-input {
  background: #151515;
  border-radius: 24px 24px 0px 0px;
  padding: 24px 16px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.note-input textarea {
  width: 100%;
  background: none;
  border: none;
  color: #a0a0a0;
  font-size: 16px;
  outline: none;
  margin-bottom: 20px;
  min-height: 24px;
  height: 48px;
  font-family: inherit;
  line-height: 1.5;
  overflow-y: auto;
  resize: none;
  -ms-overflow-style: none;  /* Hide scrollbar for IE and Edge */
  scrollbar-width: none;     /* Hide scrollbar for Firefox */
}

.note-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.emoji-buttons {
  display: flex;
  gap: 8px;
}

.emoji-btn {
  background: none;
  border: none;
  cursor: pointer;
  position: relative;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
}

.emoji-btn::before {
  content: attr(data-tooltip);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-20%);
  padding: 4px 8px;
  background-color: #1D1E20;
  color: white;
  font-size: 12px;
  border-radius: 4px;
  white-space: nowrap;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.2s ease, visibility 0.2s ease;
  margin-bottom: 8px;
}

.emoji-btn:hover::before {
  opacity: 1;
  visibility: visible;
}

.emoji-btn svg {
  Stroke: white;
  transition: stroke 0.2s ease;
} 

.emoji-btn.active {
  background: #2f3032;
}

.emoji-btn.active svg {
  stroke: #C41F3E;
}

.submit-btn {
  background: #fff;
  border: none;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}


.notes-section {
  width: 360px;
  height: 485px;
  overflow: hidden;
}

.notes-header {
  display: flex;
  align-items: center;
  padding: 16px;
  gap: 8px;
  color: #666;
}

.export{
  border: none;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.notes-list {
  display: none;
  flex-direction: column;
  max-height: 415px;
  overflow-y: auto;
}

.notes-list::-webkit-scrollbar {
  width: 6px;
}

.notes-list::-webkit-scrollbar-track {
  background: transparent;
}

.notes-list::-webkit-scrollbar-thumb {
  background: #2a2a2a;
  border-radius: 3px;
}

/* Note item */
.note-item {
  padding: 8px 16px;
  display: flex;
  flex-direction: column;
}

.note-timestamp {
  color: #666;
  font-size: 12px;
  margin-bottom: 8px;
}

.note-content {
  color: #fff;
  font-size: 13px;
  line-height: 1.4;
  margin-bottom: 8px;
  word-wrap: break-word;
  white-space: pre-wrap;
  max-width: 100%;
}

.note-emoji {
  Stroke: white;
}

.note-emoji svg {
  width: 24px;
  height: 24px;
}

/* Empty State */

.notes-empty {
  text-align: center;
  margin-top: 100px;
}


.empty-icon {
  margin-bottom: 16px;
  display: inline-block;
}

.empty-title {
  color: #fff;
  margin-bottom: 8px;
  font-size: 15px;

}

.empty-subtitle {
  color: #8B8B8D;
  font-size: 14px;
}

.note-emojis {
    display: none;
  gap: 8px;
    margin-top: 8px;
}

.note-item:hover .note-emojis {
  display: flex;
}

.note-emoji {
  background: none;
  border: none;
  cursor: pointer;
  position: relative;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #111111;
}

.note-emoji svg {
    stroke: white;
  transition: stroke 0.2s ease;
} 

.note-emoji.active {
  background: #2f3032;
}

.note-emoji.active svg {
  stroke: #C41F3E;
}

.note-header {
  display: flex;
  justify-content: space-between;
    align-items: flex-start;
  gap: 8px;
}

.note-edit {
  background: none;
  border: none;
  padding: 4px;
  cursor: pointer;
  opacity: 0;
    transition: opacity 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.note-item:hover .note-edit {
  opacity: 1;
}

.note-edit:hover svg {
    stroke: #ffffff;
}

.note-content[contenteditable="true"] {
  outline: none;
}

.hidden {
    display: none;
}

</style>

<body>
  <div class="container">
    <div class="timer-section">
      <div class="header">
        <a href="https://github.com/mannyficient/Chronicle/blob/main/README.md" target="_blank"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="white" stroke-width="1.5"/>
          <path d="M11.9922 15H12.0012" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          <path d="M12 12V8" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>  </a>
      </div>
      
      <div class="timer-display">
        00:00.00
      </div>
      
      <div class="timer-actions">
        <button class="start-btn">Start</button>
        <button class="reset-btn">Reset</button>
      </div>
      
      <div class="note-input">
        <textarea placeholder="Type your note"></textarea>
        <div class="note-actions">
          <div class="emoji-buttons">
            <button class="emoji-btn" data-tooltip="High Point">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8 15C8.91212 16.2144 10.3643 17 12 17C13.6357 17 15.0879 16.2144 16 15" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8.00897 9H8M16 9H15.991" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="emoji-btn" data-tooltip="Low Point">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8 17C8.91212 15.7856 10.3643 15 12 15C13.6357 15 15.0879 15.7856 16 17" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M8.00897 9H8M16 9H15.991" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="emoji-btn" data-tooltip="Pain Point">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8.62814 12.6736H8.16918C6.68545 12.6736 5.94358 12.6736 5.62736 12.1844C5.31114 11.6953 5.61244 11.0138 6.21504 9.65083L8.02668 5.55323C8.57457 4.314 8.84852 3.69438 9.37997 3.34719C9.91142 3 10.5859 3 11.935 3H14.0244C15.6632 3 16.4826 3 16.7916 3.53535C17.1007 4.0707 16.6942 4.78588 15.8811 6.21623L14.8092 8.10188C14.405 8.81295 14.2029 9.16849 14.2057 9.45952C14.2094 9.83775 14.4105 10.1862 14.7354 10.377C14.9854 10.5239 15.3927 10.5239 16.2074 10.5239C17.2373 10.5239 17.7523 10.5239 18.0205 10.7022C18.3689 10.9338 18.5513 11.3482 18.4874 11.7632C18.4382 12.0826 18.0918 12.4656 17.399 13.2317L11.8639 19.3523C10.7767 20.5545 10.2331 21.1556 9.86807 20.9654C9.50303 20.7751 9.67833 19.9822 10.0289 18.3962L10.7157 15.2896C10.9826 14.082 11.1161 13.4782 10.7951 13.0759C10.4741 12.6736 9.85877 12.6736 8.62814 12.6736Z" stroke-width="1.5" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="emoji-btn" data-tooltip="Need">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 7L9.48415 8.39405C8.80774 10.222 8.46953 11.136 7.80278 11.8028C7.13603 12.4695 6.22204 12.8077 4.39405 13.4842L3 14L4.39405 14.5158C6.22204 15.1923 7.13603 15.5305 7.80278 16.1972C8.46953 16.864 8.80774 17.778 9.48415 19.6059L10 21L10.5158 19.6059C11.1923 17.778 11.5305 16.864 12.1972 16.1972C12.864 15.5305 13.778 15.1923 15.6059 14.5158L17 14L15.6059 13.4842C13.778 12.8077 12.864 12.4695 12.1972 11.8028C11.5305 11.136 11.1923 10.222 10.5158 8.39405L10 7Z" stroke-width="1.5" stroke-linejoin="round"/>
                <path d="M18 3L17.7789 3.59745C17.489 4.38087 17.3441 4.77259 17.0583 5.05833C16.7726 5.34408 16.3809 5.48903 15.5975 5.77892L15 6L15.5975 6.22108C16.3809 6.51097 16.7726 6.65592 17.0583 6.94167C17.3441 7.22741 17.489 7.61913 17.7789 8.40255L18 9L18.2211 8.40255C18.511 7.61913 18.6559 7.22741 18.9417 6.94166C19.2274 6.65592 19.6191 6.51097 20.4025 6.22108L21 6L20.4025 5.77892C19.6191 5.48903 19.2274 5.34408 18.9417 5.05833C18.6559 4.77259 18.511 4.38087 18.2211 3.59745L18 3Z" stroke-width="1.5" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="emoji-btn" data-tooltip="Motivation">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17 12C17 14.7614 14.7614 17 12 17C9.23858 17 7 14.7614 7 12C7 9.23858 9.23858 7 12 7" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M14 2.20004C13.3538 2.06886 12.6849 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22C17.5228 22 22 17.5228 22 12C22 11.3151 21.9311 10.6462 21.8 10" stroke-width="1.5" stroke-linecap="round"/>
                <path d="M12.0303 11.9624L16.5832 7.40949M19.7404 4.34451L19.1872 2.35737C19.0853 2.03 18.6914 1.89954 18.4259 2.11651C16.9898 3.29007 15.4254 4.8708 16.703 7.36408C19.2771 8.56443 20.7466 6.94573 21.8733 5.58519C22.0975 5.31449 21.9623 4.90756 21.6247 4.80994L19.7404 4.34451Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
            <button class="emoji-btn" data-tooltip="Behaviour">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M14.5002 4.5C14.5002 5.32843 13.8286 6 13.0002 6C12.1717 6 11.5002 5.32843 11.5002 4.5C11.5002 3.67157 12.1717 3 13.0002 3C13.8286 3 14.5002 3.67157 14.5002 4.5Z" stroke-width="1.5"/>
                <path d="M19 8.89062L13.9777 8.29142M13.9777 8.29142L12.2231 8.08208C11.4204 7.98631 11.0191 7.93843 10.7146 8.14419C10.41 8.34995 10.299 8.74397 10.077 9.53203L9.4087 11.904C9.02319 13.2724 8.83044 13.9565 9.19196 14.3707C9.55348 14.7849 10.2465 14.674 11.6326 14.452L12.1402 14.3707M13.9777 8.29142L12.1402 14.3707M19 21L18.5438 17.5301C18.2903 15.6021 18.1636 14.6381 17.4915 14.1298C16.8194 13.6215 15.8722 13.7731 13.9777 14.0765L12.1402 14.3707" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M10 17L9.44721 18.1056C9.15692 18.6862 8.68616 19.1569 8.10557 19.4472L5 21" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>                
            </button>
          </div>
          <button class="submit-btn"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M4.16699 10.0003L10.0003 4.16699M10.0003 4.16699L15.8337 10.0003M10.0003 4.16699V15.8337" stroke="#1A1A1A" stroke-width="1.66667" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            </button>
        </div>
      </div>
    </div>
    
    <div class="notes-section">
      <div class="notes-header">
        <span>Recorded notes</span>
        <span><svg class="export" width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M13.8297 17.2492L11.7923 17.7886C9.90658 18.2878 8.96366 18.5374 8.22488 18.1286C7.48611 17.7197 7.23996 16.8121 6.74765 14.9967L5.52926 10.5041C5.03696 8.68875 4.79081 7.78112 5.22371 7.06208C5.65661 6.34304 6.59951 6.09341 8.48533 5.59416L11.8189 4.71161C13.7047 4.21236 14.6476 3.96274 15.3864 4.37158C16.1252 4.78043 16.3713 5.68809 16.8636 7.5034L18.0868 12.0139C18.2962 12.7859 18.4009 13.1719 18.2858 13.5348M13.8297 17.2492C14.4564 17.0832 14.4614 17.0806 14.9488 16.6624L17.2353 14.7004C17.859 14.1653 18.1708 13.8977 18.2858 13.5348M13.8297 17.2492C13.8297 17.2492 14.3197 13.4216 15.4167 12.9167C16.661 12.3441 18.2858 13.5348 18.2858 13.5348" stroke="white" stroke-width="1.25" stroke-linejoin="round"/>
          <path d="M14.1667 4.16774C14.1131 3.27324 13.9645 2.71017 13.5404 2.30643C12.8908 1.68803 11.8484 1.68495 9.76341 1.67878L6.07776 1.66789C3.99282 1.66173 2.95036 1.65865 2.30454 2.27323C1.65872 2.8878 1.66176 3.88002 1.66785 5.86446L1.6829 10.7757C1.68898 12.7602 1.69202 13.7523 2.34161 14.3708C2.99121 14.9892 4.03367 14.9923 6.11861 14.9984L6.68596 15.0001" stroke="white" stroke-width="1.25"/>
          </svg>
            </span>
      </div>
      
      <div class="notes-list">
        <!-- Notes will be dynamically added here -->
      </div>
      
      <div class="notes-empty">
        <div class="empty-icon">
            <svg width="121" height="92" viewBox="0 0 121 92" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M118.86 36.1301V56.1101C118.87 57.6801 117.92 59.0101 116.02 60.1101L67.6001 88.0601C65.7001 89.1601 63.3901 89.7101 60.6701 89.7001C57.9501 89.7001 55.6401 89.1401 53.7201 88.0401L5.00012 59.9101C3.08012 58.8001 2.12011 57.4701 2.11011 55.9001V35.9001C2.12011 37.4701 3.08012 38.8001 5.00012 39.9101L15.3601 45.8901L43.2001 61.9601L50.1601 65.9801L53.7201 68.0401C55.6401 69.1401 57.9501 69.7001 60.6701 69.7001C63.3901 69.7101 65.7001 69.1601 67.6001 68.0601L71.0301 66.0801L77.9401 62.0901L105.61 46.1201L116.02 40.1101C117.91 39.0201 118.86 37.6901 118.86 36.1301Z" stroke="#2A2C32"/>
                <path d="M115.97 32.1L67.2501 3.97005C65.3401 2.86005 63.0201 2.31005 60.3001 2.30005C57.5901 2.30005 55.2801 2.84005 53.3701 3.94005L4.96014 31.9001C3.05014 32.9901 2.11011 34.3301 2.11011 35.9001C2.12011 37.4701 3.08012 38.8 5.00012 39.91L15.3601 45.89L43.2001 61.96L50.1601 65.9801L53.7201 68.04C55.6401 69.14 57.9501 69.7 60.6701 69.7C63.3901 69.71 65.7001 69.16 67.6001 68.06L71.0301 66.0801L77.9401 62.09L105.61 46.12L116.02 40.1101C117.91 39.0201 118.86 37.6901 118.86 36.1301V36.1101C118.85 34.5401 117.89 33.2 115.97 32.1ZM77.8901 46.05C77.8901 46.05 77.8701 46.06 77.8601 46.07C76.8901 46.62 75.7401 46.9 74.4201 46.89C73.0901 46.89 71.9401 46.6101 70.9501 46.0401L70.8701 45.9901L67.4301 44.01L60.5101 40.01L60.4601 40.0401L53.5501 44.03L50.1301 46C50.1301 46 50.1101 46.0101 50.1001 46.0201C49.1301 46.5701 47.9901 46.85 46.6701 46.84C45.3401 46.84 44.1801 46.5501 43.1901 45.9901C43.1601 45.9801 43.1401 45.96 43.1201 45.94C42.1801 45.39 41.7101 44.73 41.7101 43.98C41.7001 43.21 42.1901 42.55 43.1701 41.98L53.5501 35.9901L43.1101 29.96C43.1101 29.96 43.0501 29.93 43.0301 29.91C42.0901 29.35 41.6301 28.7 41.6201 27.96C41.6201 27.19 42.1101 26.52 43.0901 25.96C44.0701 25.39 45.2201 25.1101 46.5501 25.1101C47.8801 25.1101 48.9701 25.38 49.9301 25.92C49.9601 25.94 49.9901 25.9501 50.0201 25.9701L60.4601 32L70.8101 26.03L70.8401 26.01C71.8201 25.44 72.9801 25.16 74.3101 25.16C75.6401 25.16 76.7901 25.4501 77.7801 26.0201C78.7701 26.5901 79.2601 27.2601 79.2601 28.0201C79.2701 28.7901 78.7801 29.4601 77.8001 30.0201L77.7601 30.0401L67.4301 36.01L77.8701 42.0401C78.8501 42.6101 79.3501 43.28 79.3501 44.05C79.3601 44.82 78.8701 45.48 77.8901 46.05Z" stroke="#2A2C32"/>
                <path d="M79.2599 28.0202C79.2699 28.7902 78.7799 29.4602 77.7999 30.0202L77.7599 30.0402L67.4299 36.0102V44.0102L60.5099 40.0102L60.46 40.0402V32.0002L70.8099 26.0302L70.84 26.0102C71.8201 25.4402 72.9799 25.1602 74.3099 25.1602C75.6399 25.1602 76.79 25.4502 77.78 26.0202C78.77 26.5902 79.2599 27.2602 79.2599 28.0202Z" stroke="#2A2C32"/>
                <path d="M79.3497 44.05C79.3597 44.82 78.8698 45.48 77.8898 46.05C77.8798 46.06 77.8697 46.06 77.8597 46.07C76.8897 46.62 75.7397 46.9 74.4197 46.89C73.0897 46.89 71.9398 46.61 70.9498 46.04L70.8697 45.99L67.4297 44.01V36.01L77.8697 42.04C78.8497 42.61 79.3497 43.28 79.3497 44.05Z" stroke="#2A2C32"/>
                <path d="M53.5501 35.99V44.03L50.1301 46C50.1301 46 50.1101 46.01 50.1001 46.02C49.1301 46.57 47.9901 46.85 46.6701 46.84C45.3401 46.84 44.1801 46.55 43.1901 45.99C43.1601 45.98 43.1401 45.96 43.1201 45.94C42.1801 45.39 41.7101 44.73 41.7101 43.98C41.7001 43.21 42.1901 42.55 43.1701 41.98L53.5501 35.99Z" stroke="#2A2C32"/>
                <path d="M60.4601 32.0001V40.0401L53.5501 44.0301V35.9901L43.1101 29.9601C43.1101 29.9601 43.0501 29.9301 43.0301 29.9101C42.0901 29.3501 41.6301 28.7001 41.6201 27.9601C41.6201 27.1901 42.1101 26.5201 43.0901 25.9601C44.0701 25.3901 45.2201 25.1101 46.5501 25.1101C47.8801 25.1101 48.9701 25.3801 49.9301 25.9201C49.9601 25.9401 49.9901 25.9501 50.0201 25.9701L60.4601 32.0001Z" stroke="#2A2C32"/>
                </svg>                
        </div>
        <div class="empty-title">Nothing to report yet</div>
        <div class="empty-subtitle">Add a note to begin</div>
      </div>
    </div>
  </div>

<script>
class Timer {
  constructor() {
    this.isRunning = false;
    this.startTime = 0;
    this.currentTime = '00:00.00';
    this.timerDisplay = document.querySelector('.timer-display');
    this.interval = null;
  }

  start() {
    if (!this.isRunning) {
      this.isRunning = true;
      this.startTime = Date.now() - (this.currentTime === '00:00.00' ? 0 : this.parseTimeToMs(this.currentTime));
      this.interval = setInterval(() => this.updateDisplay(), 10);
    }
  }

  stop() {
    this.isRunning = false;
    clearInterval(this.interval);
  }

  reset() {
    this.stop();
    this.currentTime = '00:00.00';
    this.timerDisplay.textContent = this.currentTime;
  }

  updateDisplay() {
    const elapsed = Date.now() - this.startTime;
    const minutes = Math.floor(elapsed / 60000);
    const seconds = Math.floor((elapsed % 60000) / 1000);
    const milliseconds = Math.floor((elapsed % 1000) / 10);
    
    this.currentTime = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}.${milliseconds.toString().padStart(2, '0')}`;
    this.timerDisplay.textContent = this.currentTime;
  }

  parseTimeToMs(timeStr) {
    const [mins, secs] = timeStr.split(':');
    const [seconds, ms] = secs.split('.');
    return (parseInt(mins) * 60000) + (parseInt(seconds) * 1000) + (parseInt(ms) * 10);
  }

  getCurrentTime() {
    return this.currentTime;
  }
}

class NotesManager {
  constructor() {
    this.notesList = document.querySelector('.notes-list');
    this.notesEmpty = document.querySelector('.notes-empty');
    this.noteInput = document.querySelector('.note-input textarea');
    this.submitBtn = document.querySelector('.submit-btn');
    this.emojiButtons = document.querySelectorAll('.emoji-btn');
    this.notes = [];
    this.selectedEmojis = new Set();
    this.exportBtn = document.querySelector('.export');
    this.initializeTextAreaHandler();
    this.initializeExport();
  }

  initialize() {
    this.submitBtn.addEventListener('click', () => this.submitNote());
    this.noteInput.addEventListener('keypress', (e) => {
      if (e.key === 'Enter') this.submitNote();
    });

    this.initializeEmojiButtons();
  }

  initializeEmojiButtons() {
    this.emojiButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        btn.classList.toggle('active');
        const emojiType = btn.getAttribute('data-tooltip').toLowerCase().replace(' ', '-');
        
        if (btn.classList.contains('active')) {
          this.selectedEmojis.add(emojiType);
        } else {
          this.selectedEmojis.delete(emojiType);
        }
      });
    });
  }

  initializeTextAreaHandler() {
    this.noteInput.addEventListener('input', () => {
      if (!timer.isRunning) {
        timer.start();
        document.querySelector('.start-btn').textContent = 'Stop';
      }
    });
  }

  initializeExport() {
    this.exportBtn.addEventListener('click', () => {
      console.log('Export clicked, notes:', this.notes); // Debug log
      
      if (!this.notes || this.notes.length === 0) {
        console.log('No notes to export');
        return;
      }

      parent.postMessage({ 
        pluginMessage: {
          type: 'create-notes',
          notes: this.notes
        }
      }, '*');
    });
  }

  submitNote() {
    const noteText = this.noteInput.value.trim();
    if (!noteText) return;

    const note = {
      text: noteText,
      timestamp: timer.getCurrentTime(),
      emojis: Array.from(this.selectedEmojis)
    };

    this.notes.push(note);
    this.addNoteToDisplay(note);
    this.clearInput();
    this.showNotesList();
  }

  addNoteToDisplay(note) {
    const noteElement = document.createElement('div');
    noteElement.className = 'note-item';
    
    noteElement.innerHTML = `
        <div class="note-header">
            <div class="note-content" contenteditable="false">${note.text}</div>
            <button class="note-edit">
                <svg class="edit-icon" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.7094 2.37979C13.1499 1.93934 13.3701 1.71911 13.6141 1.6138C13.9656 1.46207 14.3641 1.46207 14.7156 1.6138C14.9595 1.71911 15.1798 1.93934 15.6202 2.37979C16.0607 2.82024 16.2809 3.04046 16.3862 3.28444C16.538 3.63593 16.538 4.03443 16.3862 4.38592C16.2809 4.62989 16.0607 4.85012 15.6202 5.29057L11.854 9.05678C10.9261 9.98468 10.4622 10.4486 9.8811 10.7235C9.3 10.9984 8.64705 11.0628 7.34117 11.1917L6.75 11.25L6.80833 10.6589C6.93718 9.35295 7.00162 8.7 7.27651 8.1189C7.55138 7.5378 8.01533 7.07387 8.94323 6.14598L12.7094 2.37979Z" stroke="white" stroke-width="1.125" stroke-linejoin="round"/>
                <path d="M4.5 11.25H2.8125C2.08763 11.25 1.5 11.8376 1.5 12.5625C1.5 13.2874 2.08763 13.875 2.8125 13.875H9.9375C10.6624 13.875 11.25 14.4626 11.25 15.1875C11.25 15.9124 10.6624 16.5 9.9375 16.5H8.25" stroke="white" stroke-width="1.125" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>

                <svg class="save-icon hidden" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3.75 10.875C3.75 10.875 4.875 10.875 6.375 13.5C6.375 13.5 10.5441 6.625 14.25 5.25" stroke="white" stroke-width="1.125" stroke-linecap="round" stroke-linejoin="round"/>

                </svg>
            </button>
        </div>
        <div class="note-timestamp">${note.timestamp}</div>
    `;
    
    // Add emojis container
    const emojisContainer = document.createElement('div');
    emojisContainer.className = 'note-emojis';
    
    // Clone emoji buttons from the input section
    this.emojiButtons.forEach(originalBtn => {
        const emojiType = originalBtn.getAttribute('data-tooltip').toLowerCase().replace(' ', '-');
        const clonedBtn = originalBtn.cloneNode(true);
        clonedBtn.className = `note-emoji ${note.emojis.includes(emojiType) ? 'active' : ''}`;
        
        // Add click handler for emoji selection
        clonedBtn.addEventListener('click', () => {
            if (contentDiv.getAttribute('contenteditable') === 'true') {
                clonedBtn.classList.toggle('active');
            }
        });
        
        emojisContainer.appendChild(clonedBtn);
    });

    noteElement.appendChild(emojisContainer);
    
    // Add basic edit functionality
    const editBtn = noteElement.querySelector('.note-edit');
    const contentDiv = noteElement.querySelector('.note-content');
    const editIcon = editBtn.querySelector('.edit-icon');
    const saveIcon = editBtn.querySelector('.save-icon');

    editBtn.addEventListener('click', () => {
        const isEditing = contentDiv.getAttribute('contenteditable') === 'true';
        
        if (isEditing) {
            // Save mode
            contentDiv.setAttribute('contenteditable', 'false');
            editIcon.classList.remove('hidden');
            saveIcon.classList.add('hidden');
            editBtn.style.opacity = '';
            emojisContainer.style.display = '';  // Reset to default
        } else {
            // Edit mode
            contentDiv.setAttribute('contenteditable', 'true');
            contentDiv.focus();
            editIcon.classList.add('hidden');
            saveIcon.classList.remove('hidden');
            editBtn.style.opacity = '1';
            emojisContainer.style.display = 'flex';  // Show during edit
        }
    });
    
    this.notesList.insertBefore(noteElement, this.notesList.firstChild);
  }

  clearInput() {
    this.noteInput.value = '';
    this.selectedEmojis.clear();
    this.emojiButtons.forEach(btn => btn.classList.remove('active'));
  }

  showNotesList() {
    this.notesEmpty.style.display = 'none';
    this.notesList.style.display = 'flex';
  }

  resetNotes() {
    this.notes = [];
    this.notesList.innerHTML = '';
    this.notesEmpty.style.display = 'block';
    this.notesList.style.display = 'none';
  }
}

// Initialize timer and notes manager
const timer = new Timer();
const notesManager = new NotesManager();
notesManager.initialize();

// Add event listeners for timer controls
document.querySelector('.start-btn').addEventListener('click', function() {
  if (timer.isRunning) {
    timer.stop();
    this.textContent = 'Start';
  } else {
    timer.start();
    this.textContent = 'Stop';
  }
});

document.querySelector('.reset-btn').addEventListener('click', () => {
  timer.reset();
  notesManager.resetNotes();
  document.querySelector('.start-btn').textContent = 'Start';
});
</script>
</body>